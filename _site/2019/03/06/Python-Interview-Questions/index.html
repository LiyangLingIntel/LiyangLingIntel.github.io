<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="孤独是人生的常态吗？">
    <meta name="keywords"  content="leonling, 凌丽阳, LEON's Blog ">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Python Interview Questions - LEON的博客 | LEON's Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="
  本文主要内容转载自kenwoodjw的GitHub repo, 因为原文GitHub中没有可以跳转目录索引所以转载过来重新生成目录，方便阅读。

  转载过程中对其中的一些代码细节做了一些微小的改动，有的地方也加入一些自己的理解。整篇内容比较基础，适合用来对python开发做一个基本的回顾。

">
    
    <meta property="article:published_time" content="2019-03-06T00:00:00Z">
    
    
    <meta property="article:author" content="Lyon Ling">
    
    
    <meta property="article:tag" content="JobHunting">
    
    <meta property="article:tag" content="Python">
    
    <meta property="article:tag" content="转载">
    
    
    <meta property="og:image" content="http://localhost:4000/img/avatar_2.png">
    <meta property="og:url" content="http://localhost:4000/2019/03/06/Python-Interview-Questions/">
    <meta property="og:site_name" content="LEON的博客 | LEON's Blog">
    
    <title>Python Interview Questions - LEON的博客 | LEON's Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2019/03/06/Python-Interview-Questions/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Leon Ling's Blog</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="huxblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        
                        
                        
                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/archive/">Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#huxblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __HuxNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __HuxNav__.close()
            } else {
                __HuxNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close HuxNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __HuxNav__.close();
        })
    </script>

<script src="/js/simple-jekyll-search.min.js"></script>

    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-jubhunt2.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/post-bg-jubhunt2.jpg');
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=JobHunting" title="JobHunting">JobHunting</a>
                        
                        <a class="tag" href="/archive/?tag=Python" title="Python">Python</a>
                        
                        <a class="tag" href="/archive/?tag=%E8%BD%AC%E8%BD%BD" title="转载">转载</a>
                        
                    </div>
                    <h1>Python Interview Questions</h1>
                    
                    <h2 class="subheading">Python面试题</h2>
                    <span class="meta">Posted by Lyon Ling on March 6, 2019</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

                <blockquote>
  <p>本文主要内容转载自<a href="https://github.com/kenwoodjw"><strong>kenwoodjw</strong></a>的<code class="highlighter-rouge">GitHub</code> <a href="https://github.com/kenwoodjw/python_interview_question">repo</a>, 因为原文GitHub中没有可以跳转目录索引所以转载过来重新生成目录，方便阅读。</p>

  <p>转载过程中对其中的一些代码细节做了一些微小的改动，有的地方也加入一些自己的理解。整篇内容比较基础，适合用来对python开发做一个基本的回顾。</p>
</blockquote>

<p>[TOC]</p>

<h2 id="python基础">Python基础</h2>

<h3 id="11-有一个jsonline格式的文件filetxt-大小约为10k">1.1 有一个jsonline格式的文件file.txt 大小约为10K</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_lines</span><span class="p">():</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'file.txt'</span><span class="p">,</span><span class="s">'rb) as f:</span><span class="err">
</span><span class="s">        for eachline in f:</span><span class="err">
</span><span class="s">            l.append(eachline)</span><span class="err">
</span><span class="s">        return l</span><span class="err">

</span><span class="s">if __name__ == '</span><span class="n">__main__</span><span class="s">':</span><span class="err">
</span><span class="s">    for e in get_lines():</span><span class="err">
</span><span class="s">        process(e) #处理每一行数据</span><span class="err">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>现在要处理一个大小为10G的文件，但是内存只有4G，如果在只修改get_lines 函数而其他代码保持不变的情况下，应该如何实现？需要考虑的问题都有那些？</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_lines</span><span class="p">():</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'file.txt'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">(</span><span class="mi">60000</span><span class="p">)</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">l</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>要考虑的问题有：</p>

<ul>
  <li>内存只有4G无法一次性读入10G文件，需要分批读入分批读入数据要记录<strong>每次读入数据的位置</strong>。</li>
  <li>分批每次读取数据的大小，太小会在<strong>读取操作</strong>花费过多时间。</li>
</ul>

<h3 id="12-补充缺失的代码">1.2 补充缺失的代码</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">print_directory_contents</span><span class="p">(</span><span class="n">sPath</span><span class="p">):</span>
    <span class="s">"""
    这个函数接收文件夹的名称作为输入参数
    返回该文件夹中文件的路径
    以及其包含文件夹中文件的路径
    """</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="k">for</span> <span class="n">sChild</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">sPath</span><span class="p">):</span>
        <span class="n">sChildPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sPath</span><span class="p">,</span><span class="n">sChild</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">sChildPath</span><span class="p">):</span>
            <span class="n">print_directory_contents</span><span class="p">(</span><span class="n">sChildPath</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">sChildPath</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="模块与包">模块与包</h2>

<h3 id="21-输入日期-判断这一天是这一年的第几天">2.1 输入日期， 判断这一天是这一年的第几天？</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">datetime</span>
<span class="k">def</span> <span class="nf">dayofyear</span><span class="p">():</span>
    <span class="n">year</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"请输入年份: "</span><span class="p">)</span>
    <span class="n">month</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"请输入月份: "</span><span class="p">)</span>
    <span class="n">day</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"请输入天: "</span><span class="p">)</span>
    <span class="n">date1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">),</span><span class="n">month</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">month</span><span class="p">),</span><span class="n">day</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">day</span><span class="p">))</span>
    <span class="n">date2</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">),</span><span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">date1</span><span class="o">-</span><span class="n">date2</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="o">+</span><span class="mi">1</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="22-打乱一个排好序的list对象alist">2.2 打乱一个排好序的list对象alist？</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">random</span>
<span class="n">alist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">alist</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="数据类型">数据类型</h2>

<h3 id="31-现有字典-d-a24g52i12k33请按value值进行排序">3.1 现有字典 d= {‘a’:24,’g’:52,’i’:12,’k’:33}请按value值进行排序?</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="32-字典推导式">3.2 字典推导式</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">value</span> <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="33-请反转字符串-astr">3.3 请反转字符串 “aStr”?</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="s">"aStr"</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="34-将字符串-k1-k12k23k34处理成字典-k1k12">3.4 将字符串 “k:1 |k1:2|k2:3|k3:4”，处理成字典 {k:1,k1:2,…}</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="n">str1</span> <span class="o">=</span> <span class="s">"k:1|k1:2|k2:3|k3:4"</span>
<span class="k">def</span> <span class="nf">str2dict</span><span class="p">(</span><span class="n">str1</span><span class="p">):</span>
    <span class="n">dict1</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">iterms</span> <span class="ow">in</span> <span class="n">str1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'|'</span><span class="p">):</span>
        <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="o">=</span> <span class="n">iterms</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">):</span>
            <span class="n">dict1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict1</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="35-请按alist中元素的age由小到大排序">3.5 请按alist中元素的age由小到大排序</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">alist</span> <span class="o">=</span> <span class="p">[{</span><span class="s">'name'</span><span class="p">:</span><span class="s">'a'</span><span class="p">,</span><span class="s">'age'</span><span class="p">:</span><span class="mi">20</span><span class="p">},{</span><span class="s">'name'</span><span class="p">:</span><span class="s">'b'</span><span class="p">,</span><span class="s">'age'</span><span class="p">:</span><span class="mi">30</span><span class="p">},{</span><span class="s">'name'</span><span class="p">:</span><span class="s">'c'</span><span class="p">,</span><span class="s">'age'</span><span class="p">:</span><span class="mi">25</span><span class="p">}]</span>
<span class="k">def</span> <span class="nf">sort_by_age</span><span class="p">(</span><span class="n">list1</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">alist</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="s">'age'</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="36-下面代码的输出结果将是什么">3.6 下面代码的输出结果将是什么？</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'e'</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">10</span><span class="p">:])</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>代码将输出[],不会产生IndexError错误，就像所期望的那样，尝试用超出成员的个数的index来获取某个列表的成员。例如，尝试获取list[10]和之后的成员，会导致IndexError。然而，尝试获取列表的<strong>切片</strong>，开始的index超过了成员个数<strong>不会产生IndexError</strong>，而是仅仅返回一个空列表。这成为特别让人恶心的疑难杂症，因为运行的时候没有错误产生，导致Bug很难被追踪到。</p>
<h3 id="37-写一个列表生成式产生一个公差为11的等差数列">3.7 写一个列表生成式，产生一个公差为11的等差数列</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">print</span><span class="p">([</span><span class="n">x</span><span class="o">*</span><span class="mi">11</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>
<span class="k">print</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">11</span><span class="p">)])</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="38-给定两个列表怎么找出他们相同的元素和不同的元素">3.8 给定两个列表，怎么找出他们相同的元素和不同的元素？</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">set1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>
<span class="n">set2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">set1</span> <span class="o">&amp;</span> <span class="n">set2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">set1</span> <span class="o">^</span> <span class="n">set2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="39-请写出一段python代码实现删除list里面的重复元素">3.9 请写出一段python代码实现删除list里面的重复元素？</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'a'</span><span class="p">,</span><span class="s">'a'</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">l1</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
<span class="c1"># 这里有个问题，是通过list-&gt;set-&gt;list几步抓换会改变原有list的元素顺序，所有有下面的改动
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>用list类的sort方法:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'a'</span><span class="p">,</span><span class="s">'a'</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">l1</span><span class="p">))</span>
<span class="n">l2</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">l1</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>也可以这样写:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'a'</span><span class="p">,</span><span class="s">'a'</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">l1</span><span class="p">),</span><span class="n">key</span><span class="o">=</span><span class="n">l1</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>也可以用遍历：</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">l1</span> <span class="o">=</span> <span class="p">[</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'d'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'a'</span><span class="p">,</span><span class="s">'a'</span><span class="p">]</span>
<span class="n">l2</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l1</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l2</span><span class="p">:</span>
        <span class="n">l2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">l2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="企业面试题">企业面试题</h2>

<h3 id="41-python新式类和经典类的区别">4.1 python新式类和经典类的区别？</h3>

<ol>
  <li>在python里凡是继承了object的类，都是新式类</li>
  <li>Python3里只有新式类</li>
  <li>Python2里面继承object的是新式类，没有写父类的是经典类</li>
  <li>经典类目前在Python里基本没有应用</li>
</ol>

<h3 id="42-python中内置的数据结构有几种">4.2 python中内置的数据结构有几种？</h3>

<ol>
  <li>整型 int、 长整型 long、浮点型 float、 复数 complex</li>
  <li>字符串 str、 列表list、 元祖tuple</li>
  <li>字典 dict 、 集合 set</li>
</ol>

<h3 id="43-python如何实现单例模式请写出两种实现方式">4.3 python如何实现单例模式?请写出两种实现方式?`</h3>

<blockquote>
  <p><strong>单例模式</strong>（Singleton Pattern）原本是Java开发的基本设计模式之一，属于<strong>创建型</strong>模式。这种<strong>模式</strong>涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。 这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要<strong>实例</strong>化该类的对象。</p>
</blockquote>

<p>第一种方法:使用<strong>装饰器</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">singleton</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
    <span class="c1"># 这种方法下保证每个被装饰的class只有一个实例对象
</span>    <span class="n">instances</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
            <span class="n">instances</span><span class="p">[</span><span class="n">cls</span><span class="p">]</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instances</span><span class="p">[</span><span class="n">cls</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="o">@</span><span class="n">singleton</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">foo1</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">foo2</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">foo1</span> <span class="ow">is</span> <span class="n">foo2</span><span class="p">)</span> <span class="c1">#True
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>第二种方法：使用<strong>基类</strong>
New 是真正创建实例对象的方法，所以重写基类的new 方法，以此保证创建对象的时候只生成一个实例</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Singleton</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="s">'_instance'</span><span class="p">):</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Singleton</span><span class="p">,</span><span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">_instance</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">foo1</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">foo2</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>

<span class="k">print</span> <span class="n">foo1</span> <span class="ow">is</span> <span class="n">foo2</span> <span class="c1">#True
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>第三种方法：<strong>元类</strong>，元类是用于创建类对象的类，类对象创建实例对象时一定要调用call方法，因此在调用call时候保证始终只创建一个实例即可，type是python的元类</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Singleton</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="s">'_instance'</span><span class="p">):</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Singleton</span><span class="p">,</span><span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">_instance</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">Singleton</span>

<span class="n">foo1</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">foo2</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="k">print</span> <span class="n">foo1</span> <span class="ow">is</span> <span class="n">foo2</span> <span class="c1">#True
</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="44-反转一个整数例如-123---321">4.4 反转一个整数，例如-123 –&gt; -321</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="o">-</span><span class="mi">10</span><span class="o">&lt;</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="n">str_x</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">str_x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span><span class="s">"-"</span><span class="p">:</span>
            <span class="n">str_x</span> <span class="o">=</span> <span class="n">str_x</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">str_x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">str_x</span> <span class="o">=</span> <span class="n">str_x</span><span class="p">[</span><span class="mi">1</span><span class="p">:][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">str_x</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span>
        <span class="k">return</span> <span class="n">x</span> <span class="k">if</span> <span class="o">-</span><span class="mi">2147483648</span><span class="o">&lt;</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">2147483647</span> <span class="k">else</span> <span class="mi">0</span>
    
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">Solution</span><span class="p">()</span>
    <span class="n">reverse_int</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="o">-</span><span class="mi">120</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">reverse_int</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h2 id="45-设计实现遍历目录与子目录抓取pyc文件">4.5 设计实现遍历目录与子目录，抓取.pyc文件</h2>
<p>第一种方法：</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">getFiles</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span><span class="n">suffix</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span><span class="n">dirs</span><span class="p">,</span><span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="nb">dir</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">name</span><span class="p">,</span><span class="n">suf</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">suf</span> <span class="o">==</span> <span class="n">suffix</span><span class="p">:</span>
                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">filename</span><span class="p">))</span>

    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">getFiles</span><span class="p">(</span><span class="s">"./"</span><span class="p">,</span><span class="s">'.pyc'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>第二种方法：</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">pick</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s">".pyc"</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">scan_path</span><span class="p">(</span><span class="n">ph</span><span class="p">):</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">ph</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    		<span class="n">pick</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="n">scan_path</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'输入目录'</span><span class="p">)</span>
    <span class="n">scan_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<blockquote>
  <p>上面两种方法主要采用了os库的<code class="highlighter-rouge">listdir</code>和<code class="highlighter-rouge">walk</code>的方法，但是我觉得如果换成我来写可能会写的更简洁一点。</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="nb">dir</span><span class="p">,</span> <span class="n">suffix</span><span class="p">):</span>
    <span class="c1"># 需要在函数外验证dir的有效性
</span>    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="nb">dir</span><span class="p">):</span>
		<span class="n">file_paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">file</span><span class="p">)</span> <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files</span> <span class="k">if</span> <span class="nb">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">file_paths</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="46-一行代码实现1-100之和">4.6 一行代码实现1-100之和</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">count</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">101</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="python高级">Python高级</h2>

<h3 id="51-对设计模式的理解简述你了解的设计模式">5.1 对设计模式的理解，简述你了解的设计模式？</h3>

<p>设计模式是经过总结，优化的，对我们经常会碰到的一些编程问题的可重用解决方案。一个设计模式并不像一个类或一个库那样能够直接作用于我们的代码，反之，设计模式更为高级，它是一种必须在特定情形下实现的一种<strong>方法模板</strong>。
常见的是<strong>工厂模式</strong>和<strong>单例模式</strong>。</p>

<blockquote>
  <p><strong>工厂模式</strong>（Factory Pattern）是 Java 中最常用的设计模式之一。这种类型的设计模式属于<strong>创建型</strong>模式，它提供了一种创建对象的最佳方式。在工厂模式中，我们在创建对象时不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。</p>
</blockquote>

<p>下面是一个简单的工厂类的示例</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="c1">// 子类实现如下</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">draw</span><span class="o">();</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CircleShape</span> <span class="kd">implements</span> <span class="nc">Shape</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">CircleShape</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>  <span class="s">"CircleShape: created"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>  <span class="s">"draw: CircleShape"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShapeFactory</span> <span class="o">{</span>
    <span class="c1">// 工厂类</span>
    <span class="c1">// 其中每个子类需要单独实现</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">TAG</span> <span class="o">=</span> <span class="s">"ShapeFactory"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Shape</span> <span class="nf">getShape</span><span class="o">(</span><span class="nc">String</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Shape</span> <span class="n">shape</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"circle"</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CircleShape</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"rect"</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RectShape</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"triangle"</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TriangleShape</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">shape</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p><a href="###4.3 python如何实现单例模式?请写出两种实现方式?"><strong>单例模式</strong></a>上面提过，就不再赘述。</p>
</blockquote>

<h3 id="52-请手写一个单例">5.2 请手写一个单例</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1"># python2
</span><span class="k">class</span> <span class="nc">Singleton</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">__instance</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span> <span class="o">=</span> <span class="n">objecet</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">cls</span><span class="o">.</span><span class="n">__instance</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="53-单例模式的应用场景有那些">5.3 单例模式的应用场景有那些？</h3>

<p>单例模式应用的场景一般发现在以下条件下：
资源共享的情况下，避免由于资源操作时导致的性能或损耗等，如日志文件，应用配置。
控制资源的情况下，方便资源之间的互相通信。如线程池等，1,网站的计数器 2,应用配置 3.多线程池 4数据库配置 数据库连接池 5.应用程序的日志应用…</p>

<h3 id="54-对装饰器的理解并写出一个计时器记录方法执行性能的装饰器">5.4 对装饰器的理解，并写出一个计时器记录方法执行性能的装饰器？</h3>

<p>装饰器本质上是一个python函数，它可以让其他函数在不需要做任何代码变动的前提下增加额外功能，装饰器的返回值也是一个函数对象。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">timeit</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span>
        <span class="n">func</span><span class="p">()</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'used:'</span><span class="p">,</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wrapper</span>
<span class="o">@</span><span class="n">timeit</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'in foo()'</span><span class="n">foo</span><span class="p">())</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="55-解释一下什么是闭包closure">5.5 解释一下什么是闭包(Closure)？</h3>

<p>在函数内部再定义一个函数，并且这个函数用到了外边函数的变量，那么将这个函数以及用到的一些变量称之为闭包。</p>

<h3 id="56-函数装饰器有什么作用">5.6 函数装饰器有什么作用？</h3>

<p>装饰器本质上是一个python函数，它可以在让其他函数在不需要做任何代码的变动的前提下增加额外的功能。装饰器的返回值也是一个函数的对象，它经常用于有切面需求的场景。比如：插入日志，性能测试，事务处理，缓存。权限的校验等场景，有了装饰器就可以抽离出大量的与函数功能本身无关的雷同代码并发并继续使用。</p>
<h3 id="57-生成器迭代器的区别">5.7 生成器，迭代器的区别？</h3>

<p>迭代器（iterator）是一个更抽象的概念，任何对象，如果它的类有<code class="highlighter-rouge">next</code>方法和<code class="highlighter-rouge">iter</code>方法返回自己本身，对于string,list,dict,tuple等这类容器对象，使用for循环遍历是很方便的，在后台for语句对容器对象调用iter()函数，iter()是python的内置函数，<code class="highlighter-rouge">iter()</code>会返回一个定义了<code class="highlighter-rouge">next()</code>方法的迭代器对象，它在容器中逐个访问容器内元素，<code class="highlighter-rouge">next()</code>也是python的内置函数，在没有后续元素时，<code class="highlighter-rouge">next()</code>会抛出一个<code class="highlighter-rouge">StopIteration</code>异常。
生成器（Generator）是创建迭代器的简单而强大的工具。它们写起来就像是正规的函数，只是在需要返回数据的时候使用<code class="highlighter-rouge">yield</code>语句。每次<code class="highlighter-rouge">next()</code>被调用时，生成器会返回它脱离的位置（它记忆语句最后一次执行的位置和所有的数据值）
区别： 生成器能做到迭代器能做的所有事，而且因为自动创建<code class="highlighter-rouge">iter()</code>和<code class="highlighter-rouge">next()</code>方法，生成器显得特别简洁，而且生成器也是高效的，使用生成器表达式取代列表解析可以同时节省内存。除了创建和保存程序状态的自动方法，当发生器终结时，还会自动抛出<code class="highlighter-rouge">StopIteration</code>异常。</p>

<h3 id="58-x是什么类型">5.8 X是什么类型?</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">X</span> <span class="o">=</span> <span class="p">(</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ramg</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># X 是generator类型
</span></pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="59-请用一行代码-实现将1-n-的整数列表以3为单位分组">5.9 请用一行代码 实现将1-N 的整数列表以3为单位分组</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1"># original one
</span><span class="k">print</span><span class="p">([[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)]</span> <span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">list_a</span><span class="p">),</span><span class="mi">3</span><span class="p">)])</span>
<span class="c1"># My idea
</span><span class="k">print</span><span class="p">([[</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="510-python中yield的用法">5.10 Python中yield的用法</h3>

<p><code class="highlighter-rouge">yield</code>就是保存当前程序执行状态。你用for循环的时候，每次取一个元素的时候就会计算一次。用yield的函数叫<code class="highlighter-rouge">generator</code>,和<code class="highlighter-rouge">iterator</code>一样，它的好处是不用一次计算所有元素，而是用一次算一次，可以节省很多空间，generator每次计算需要上一次计算结果，所以用yield, 否则一return，上次计算结果就没了</p>

<h2 id="系统编程">系统编程</h2>

<h3 id="61-进程总结">6.1 进程总结</h3>

<p><strong>进程</strong>：程序运行在操作系统上的一个实例，就称之为进程。进程需要相应的系统资源：内存、时间片、pid。<strong>进程是操作系统资源调度的最小单位</strong>。</p>

<ul>
  <li>
    <p><strong>创建进程</strong>：</p>

    <p>首先要导入multiprocessing中的Process：</p>

    <p>创建一个Process对象;
创建Process对象时，可以传递参数;</p>
  </li>
</ul>

<pre><code class="language-pseudocode">    p = Process(target=XXX,args=(tuple,),kwargs={key:value})
    target = XXX 指定的任务函数，不用加(),
    args=(tuple,)kwargs={key:value} 给任务函数传递的参数
</code></pre>
<ul>
  <li><strong>使用start()启动进程</strong>:
结束进程
给子进程指定函数传递参数Demo</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">from</span> <span class="nn">mulitprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="k">def</span> <span class="nf">pro_func</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"子进程正在运行中，name=</span><span class="si">%</span><span class="s">s,age=</span><span class="si">%</span><span class="s">d,pid=</span><span class="si">%</span><span class="s">d"</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()))</span>
            <span class="k">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
        <span class="c1">#创建Process对象
</span>        <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">pro_func</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s">'小明'</span><span class="p">,</span><span class="mi">18</span><span class="p">),</span><span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">'m'</span><span class="p">:</span><span class="mi">20</span><span class="p">})</span>
        <span class="c1">#启动进程
</span>        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1">#1秒钟之后，立刻结束子进程
</span>        <span class="n">p</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
        <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p><em>注意：进程间不共享全局变量</em></p>

<ul>
  <li>
    <p>进程之间的通信: <code class="highlighter-rouge">Queue</code></p>
  </li>
  <li>
    <p>在初始化<code class="highlighter-rouge">Queue()</code>对象时（例如q=Queue(),若在括号中没有指定最大可接受的消息数量，获数量为负值时，那么就代表可接受的消息数量没有上限一直到内存尽头）</p>

    <ul>
      <li>
        <p><code class="highlighter-rouge">Queue.qsize()</code>: 返回当前队列包含的消息数量</p>
      </li>
      <li>
        <p><code class="highlighter-rouge">Queue.empty()</code>: 如果队列为空，返回True，反之False</p>
      </li>
      <li>
        <p><code class="highlighter-rouge">Queue.full()</code>: 如果队列满了，返回True,反之False</p>
      </li>
      <li>
        <p><code class="highlighter-rouge">Queue.get([block[,timeout]])</code>: 获取队列中的一条消息，然后将其从队列中移除，block默认值为True。
如果block使用默认值，且没有设置timeout(单位秒),消息队列如果为空，此时程序将被<strong>阻塞</strong>（停在读取状态），直到消息队列读到消息为止，如果设置了timeout，则会等待timeout秒，若还没读取到任何消息，则抛出”Queue.Empty”异常。</p>
      </li>
      <li>
        <p><code class="highlighter-rouge">Queue.get_nowait()</code>: 相当于<code class="highlighter-rouge">Queue.get(False)</code></p>
      </li>
      <li>
        <p><code class="highlighter-rouge">Queue.put(item,[block[,timeout]])</code>: 将item消息写入队列，block默认值为True;
如果block使用默认值，且没有设置timeout（单位秒），消息队列如果已经没有空间可写入，此时程序将被<strong>阻塞</strong>（停在写入状态），直到从消息队列腾出空间为止，如果设置了timeout，则会等待timeout秒，若还没空间，则抛出”Queue.Full”异常。
如果block值为False，消息队列如果没有空间可写入，则会立刻抛出”Queue.Full”异常。</p>
      </li>
      <li>
        <p>Queue.put_nowait(item): 相当<code class="highlighter-rouge">Queue.put(item,False)</code></p>

        <p>进程间通信Demo:</p>
      </li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre>    <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Queue</span>
    <span class="kn">import</span> <span class="nn">os</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">random</span>
    <span class="c1"># 写数据进程执行的代码：
</span>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'A'</span><span class="p">,</span><span class="s">'B'</span><span class="p">,</span><span class="s">'C'</span><span class="p">]:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Put </span><span class="si">%</span><span class="s">s to queue..."</span><span class="p">,</span><span class="o">%</span><span class="n">value</span><span class="p">)</span>
            <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
    <span class="c1"># 读数据进程执行的代码
</span>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">q</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"Get </span><span class="si">%</span><span class="s">s from queue."</span><span class="p">,</span><span class="o">%</span><span class="n">value</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
        <span class="c1">#父进程创建Queue，并传给各个子进程
</span>        <span class="n">q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">write</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,))</span>
        <span class="n">pr</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">read</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,))</span>
        <span class="c1">#启动子进程pw ，写入：
</span>        <span class="n">pw</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="c1">#等待pw结束
</span>        <span class="n">pw</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="c1">#启动子进程pr，读取：
</span>        <span class="n">pr</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">pr</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        <span class="c1">#pr 进程里是死循环，无法等待其结束，只能强行终止:
</span>        <span class="k">print</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'所有数据都写入并且读完'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>进程池 Pool</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>    <span class="c1">#coding:utf-8
</span>    <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span>
    <span class="kn">import</span> <span class="nn">os</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">random</span>

    <span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">t_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">s 开始执行，进程号为</span><span class="si">%</span><span class="s">d"</span><span class="o">%</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()))</span>
        <span class="c1"># random.random()随机生成0-1之间的浮点数
</span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">t_stop</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="s">"执行完毕，耗时</span><span class="si">%0.2</span><span class="s">f”</span><span class="si">%</span><span class="s">（t_stop-t_start))</span><span class="err">

</span><span class="s">    po = Pool(3) # 定义一个进程池，最大进程数3</span><span class="err">
</span><span class="s">    for i in range(0,10):</span><span class="err">
</span><span class="s">        po.apply_async(worker,(i,))</span><span class="err">
</span><span class="s">        print("</span><span class="o">---</span><span class="n">start</span><span class="o">----</span><span class="s">")</span><span class="err">
</span><span class="s">        po.close()</span><span class="err">
</span><span class="s">        po.join()</span><span class="err">
</span><span class="s">        print("</span><span class="o">----</span><span class="n">end</span><span class="o">----</span><span class="s">")</span><span class="err">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<ul>
  <li>进程池中使用 Queue
如果要使用Pool创建进程，就需要使用<code class="highlighter-rouge">multiprocessing.Manager()</code>中的<code class="highlighter-rouge">Queue()</code>,而不是<code class="highlighter-rouge">multiprocessing.Queue()</code>,否则会得到如下的错误信息：
<code class="highlighter-rouge">RuntimeError</code>： Queue objects should only be shared between processs through inheritance</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Manager</span><span class="p">,</span><span class="n">Pool</span>
        <span class="kn">import</span> <span class="nn">os</span><span class="p">,</span><span class="n">time</span><span class="p">,</span><span class="n">random</span>
        <span class="k">def</span> <span class="nf">reader</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"reader 启动(</span><span class="si">%</span><span class="s">s),父进程为（</span><span class="si">%</span><span class="s">s)"</span><span class="o">%</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">(),</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">q</span><span class="o">.</span><span class="n">qsize</span><span class="p">()):</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"reader 从Queue获取到消息:</span><span class="si">%</span><span class="s">s"</span><span class="o">%</span><span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">True</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">writer</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"writer 启动（</span><span class="si">%</span><span class="s">s),父进程为(</span><span class="si">%</span><span class="s">s)"</span><span class="o">%</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">(),</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">()))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="n">ini</span> <span class="s">"itcast"</span><span class="p">:</span>
                <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"(</span><span class="si">%</span><span class="s">s)start"</span><span class="o">%</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">())</span>
            <span class="n">q</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span><span class="c1">#使用Manager中的Queue
</span>            <span class="n">po</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">()</span>
            <span class="n">po</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">wrtier</span><span class="p">,(</span><span class="n">q</span><span class="p">,))</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">po</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">reader</span><span class="p">,(</span><span class="n">q</span><span class="p">,))</span>
            <span class="n">po</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">po</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"(</span><span class="si">%</span><span class="s">s)End"</span><span class="o">%</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">())</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="62-谈谈你对多进程多线程以及协程的理解项目是否用">6.2 谈谈你对多进程，多线程，以及协程的理解，项目是否用？</h3>

<p>这个问题被问的概念相当之大，
<strong>进程</strong>：一个运行的程序（代码）就是一个进程，没有运行的代码叫程序，<strong>进程是系统资源分配的最小单位</strong>，进程拥有自己独立的内存空间，所有进程间数据不共享，开销大。
<strong>线程</strong>: <strong>cpu调度执行的最小单位</strong>，也叫执行路径，不能独立存在，依赖进程存在，一个进程至少有一个线程，叫主线程，而多个线程共享内存（数据共享，共享全局变量），从而极大地提高了程序的运行效率。
<strong>协程</strong>: 是一种<u>用户态</u>的轻量级线程，<strong><u>协程的调度完全由程序员控制(系统内核不管)</u></strong>。协程拥有自己的寄存器上下文和栈。协程调度时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操纵栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以<u>上下文的切换非常快</u>。</p>

<h3 id="63-python异常使用场景有那些">6.3 Python异常使用场景有那些？</h3>

<p>异步的使用场景:
1、 不涉及共享资源，获对共享资源只读，即非互斥操作
2、 没有时序上的严格关系
3、 不需要原子操作，或可以通过其他方式控制原子性
4、 常用于IO操作等耗时操作，因为比较影响客户体验和使用性能
5、 不影响主线程逻辑</p>

<h3 id="64-多线程共同操作同一个数据互斥锁同步">6.4 多线程共同操作同一个数据互斥锁同步？</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">threading</span>
    <span class="kn">import</span> <span class="nn">time</span>
    <span class="k">class</span> <span class="nc">MyThread</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">global</span> <span class="n">num</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
            <span class="k">if</span> <span class="n">mutex</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">num</span> <span class="o">+=</span><span class="mi">1</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s">'set num to '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">mutex</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
    <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">mutex</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">MyThread</span><span class="p">()</span>
            <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
        <span class="n">test</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="65-什么是多线程竞争">6.5 什么是多线程竞争？</h3>

<ul>
  <li>线程是非独立的，同一个进程里线程是数据共享的，当各个线程访问数据资源时会出现竞争状态即：数据几乎同步会被多个线程占用，造成数据混乱，即所谓的线程不安全</li>
  <li>那么怎么解决多线程竞争问题？—— 锁</li>
  <li>锁的好处： 确保了某段关键代码（共享数据资源）只能由一个线程从头到尾完整地执行能解决多线程资源竞争下的原子操作问题。</li>
  <li>锁的坏处：阻止了多线程并发执行，包含锁的某段代码实际上只能以<strong>单线程模式</strong>执行，效率就大大地下降了</li>
  <li>锁的致命问题：死锁</li>
</ul>

<h3 id="66--请介绍一下python的线程同步">6.6  请介绍一下Python的线程同步？</h3>

<ol>
  <li><strong>setDaemon(False)</strong>
当一个进程启动之后，会默认产生一个主线程，因为线程是程序执行的最小单位，当设置多线程时，主线程会创建多个子线程，在Python中，默认情况下就是setDaemon(False),主线程执行完自己的任务以后，就退出了，此时子线程会继续执行自己的任务，直到自己的任务结束。
例子</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">threading</span> 
    <span class="kn">import</span> <span class="nn">time</span>
    
    <span class="k">def</span> <span class="nf">thread</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'---子线程结束---'</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'---主线程--结束'</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
        
    <span class="c1">#执行结果
</span>    <span class="o">---</span><span class="err">主线程</span><span class="o">--</span><span class="err">结束</span>
    <span class="o">---</span><span class="err">子线程结束</span><span class="o">---</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<ol>
  <li><strong>setDaemon（True)</strong>
当我们使用setDaemon(True)时，这是子线程为守护线程，主线程一旦执行结束，则全部子线程被强制终止
例子</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">threading</span>
    <span class="kn">import</span> <span class="nn">time</span>
    <span class="k">def</span> <span class="nf">thread</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="err">’</span><span class="o">---</span><span class="err">子线程结束</span><span class="o">---</span><span class="s">')</span><span class="err">
</span><span class="s">    def main():</span><span class="err">
</span><span class="s">        t1 = threading.Thread(target=thread)</span><span class="err">
</span><span class="s">        t1.setDaemon(True) #设置子线程守护主线程</span><span class="err">
</span><span class="s">        t1.start()</span><span class="err">
</span><span class="s">        print('</span><span class="o">---</span><span class="err">主线程结束</span><span class="o">---</span><span class="s">')</span><span class="err">
</span><span class="s">    </span><span class="err">
</span><span class="s">    if __name__ =='</span><span class="n">__main__</span><span class="s">':</span><span class="err">
</span><span class="s">        main()</span><span class="err">
</span><span class="s">    #执行结果</span><span class="err">
</span><span class="s">    ---主线程结束--- #只有主线程结束，子线程来不及执行就被强制结束</span><span class="err">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<ol>
  <li><strong>join（线程同步)</strong>
join 所完成的工作就是线程同步，即主线程任务结束以后，进入堵塞状态，一直等待所有的子线程结束以后，主线程再终止。
当设置守护线程时，含义是主线程对于子线程等待timeout的时间将会杀死该子线程，最后退出程序，所以说，如果有10个子线程，全部的等待时间就是每个timeout的累加和，简单的来说，就是给每个子线程一个timeou的时间，让他去执行，时间一到，不管任务有没有完成，直接杀死。
没有设置守护线程时，主线程将会等待timeout的累加和这样的一段时间，时间一到，主线程结束，但是并没有杀死子线程，子线程依然可以继续执行，直到子线程全部结束，程序退出。
例子</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>    <span class="kn">import</span> <span class="nn">threading</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="k">def</span> <span class="nf">thread</span><span class="p">():</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'---子线程结束---'</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">t1</span><span class="o">.</span><span class="n">setDaemon</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">t1</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="c1">#1 线程同步，主线程堵塞1s 然后主线程结束，子线程继续执行
</span>                          <span class="c1">#2 如果不设置timeout参数就等子线程结束主线程再结束
</span>                          <span class="c1">#3 如果设置了setDaemon=True和timeout=1主线程等待1s后会强制杀死子线程，      
</span>                          <span class="c1">#  然后主线程结束
</span>        <span class="k">print</span><span class="p">(</span><span class="s">'---主线程结束---'</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main___'</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<h3 id="67-解释以下什么是锁有哪几种锁">6.7 解释以下什么是锁，有哪几种锁？</h3>

<p><strong>锁(Lock)</strong>是python提供的对线程控制的对象。有互斥锁，可重入锁，死锁。</p>

<h3 id="68-什么是死锁">6.8 什么是死锁？</h3>

<p>若干子线程在系统资源竞争时，都在等待对方对某部分资源解除占用状态，结果是谁也不愿先解锁，互相干等着，程序无法执行下去，这就是死锁。
GIL锁 全局解释器锁（只在cython里才有）
作用： 限制多线程同时执行，保证同一时间只有一个线程执行，所以cython里的多线程其实是伪多线程！
所以<u>python里常常使用协程技术来代替多线程</u>，协程是一种更轻量级的线程。
进程和线程的切换时由系统决定，而协程由我们程序员自己决定，而模块gevent下切换是遇到了耗时操作时才会切换
三者的关系：进程里有线程，线程里有协程。</p>

<h3 id="69-多线程交互访问数据如果访问到了就不访问了">6.9 多线程交互访问数据，如果访问到了就不访问了？</h3>

<p>怎么避免重读？
创建一个已访问数据列表，用于存储已经访问过的数据，并加上互斥锁，在多线程访问数据的时候先查看数据是否在已访问的列表中，若已存在就直接跳过。</p>

<h3 id="610-什么是线程安全什么是互斥锁">6.10 什么是线程安全，什么是互斥锁？</h3>

<p>每个对象都对应于一个可称为’<em>互斥锁</em>‘的标记，这个标记用来保证在任一时刻，只能有一个线程访问该对象。
同一进程中的多线程之间是共享系统资源的，多个线程同时对一个对象进行操作，一个线程操作尚未结束，另一线程已经对其进行操作，导致最终结果出现错误，此时需要对被操作对象添加互斥锁，保证每个线程对该对象的操作都得到正确的结果。</p>

<h3 id="611说说下面几个概念同步异步阻塞非阻塞">6.11说说下面几个概念：同步，异步，阻塞，非阻塞？</h3>

<p>同步： 多个任务之间有先后顺序执行，一个执行完下个才能执行。
异步： 多个任务之间没有先后顺序，可以同时执行，有时候一个任务可能要在必要的时候获取另一个同时执行的任务的结果，这个就叫回调！
阻塞： 如果卡住了调用者，调用者不能继续往下执行，就是说调用者阻塞了。
非阻塞： 如果不会卡住，可以继续执行，就是说非阻塞的。
同步异步相对于<strong>多任务</strong>而言，阻塞非阻塞相对于<strong>代码执行</strong>而言。</p>

<h3 id="612-什么是僵尸进程和孤儿进程怎么避免僵尸进程">6.12 什么是僵尸进程和孤儿进程？怎么避免僵尸进程？</h3>

<ul>
  <li><strong>孤儿进程</strong>： 父进程退出，子进程还在运行的这些子进程都是孤儿进程，孤儿进程将被init 进程（进程号为1）所收养，并由init 进程对他们完成状态收集工作。</li>
  <li><strong>僵尸进程</strong>： 进程使用fork 创建子进程，如果子进程退出，而父进程并没有调用wait 获waitpid 获取子进程的状态信息，那么子进程的进程描述符仍然保存在系统中的这些进程是僵尸进程。</li>
  <li>避免僵尸进程的方法：
    <ul>
      <li>fork 两次用孙子进程去完成子进程的任务</li>
      <li>用wait()函数使父进程阻塞</li>
      <li>使用信号量(semaphore)，在signal handler 中调用waitpid, 这样父进程不用阻塞</li>
    </ul>
  </li>
</ul>

<h3 id="713-python中进程与线程的使用场景">7.13 python中进程与线程的使用场景？</h3>

<p>多进程适合在CPU密集操作（cpu操作指令比较多，如位多的的浮点运算）。
多线程适合在IO密性型操作（读写数据操作比多的的，比如爬虫）</p>

<h3 id="714-线程是并发还是并行进程是并发还是并行">7.14 线程是并发还是并行，进程是并发还是并行？</h3>

<p><strong>线程是并发，进程是并行</strong>。
进程之间互相独立，是系统分配资源的最小单位，同一个线程中的所有线程共享资源。</p>

<h3 id="715-并行parallel和并发concurrency">7.15 并行(parallel)和并发（concurrency)?</h3>

<p><strong>并行</strong>： 同一时刻多个任务同时在运行
<strong>并发</strong>:  在同一时间间隔内多个任务都在运行，但是并不会在同一时刻同时运行，存在交替执行的情况。
实现并行的库有：<code class="highlighter-rouge">multiprocessing</code>
实现并发的库有:  <code class="highlighter-rouge">threading</code>
程序需要执行较多的读写、请求和回复任务的需要大量的IO操作，IO密集型操作使用并发更好。
CPU运算量大的程序，使用并行会更好。</p>

<h3 id="716-io密集型和cpu密集型区别">7.16 IO密集型和CPU密集型区别？</h3>

<p><strong>IO密集型</strong>： 系统运行，大部分的状况是CPU在等 I/O（硬盘/内存）的读/写
<strong>CPU密集型</strong>： 大部分时间用来做计算，逻辑判断等CPU动作的程序称之CPU密集型。</p>


                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2019/02/25/Aliyun-Professional-Certification/"
                            data-toggle="tooltip" data-placement="top" title="Alibaba ACP Big Data Certification">
                            Previous<br>
                            <span>Alibaba ACP Big Data Certification</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2019/03/06/Python-Interview-Questions2/" data-toggle="tooltip"
                            data-placement="top" title="Computer Science Interview Questions">
                            Next<br>
                            <span>Computer Science Interview Questions</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                
                <!-- disqus 评论框 start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus 评论框 end -->
                

                
            </div>

            <!-- Side Catalog Container -->
            
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
            

            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        </a>
        
        
                <a data-sort="0043" 
                    href="/archive/?tag=Tricks"
                    title="Tricks"
                    rel="8">Tricks</a>
        
                <a data-sort="0040" 
                    href="/archive/?tag=JobHunting"
                    title="JobHunting"
                    rel="11">JobHunting</a>
        
                <a data-sort="0042" 
                    href="/archive/?tag=%E8%BD%AC%E8%BD%BD"
                    title="转载"
                    rel="9">转载</a>
        
                <a data-sort="0042" 
                    href="/archive/?tag=Foundations"
                    title="Foundations"
                    rel="9">Foundations</a>
        
                <a data-sort="0044" 
                    href="/archive/?tag=Notes"
                    title="Notes"
                    rel="7">Notes</a>
        
                <a data-sort="0044" 
                    href="/archive/?tag=Programing"
                    title="Programing"
                    rel="7">Programing</a>
        
                <a data-sort="0044" 
                    href="/archive/?tag=Python"
                    title="Python"
                    rel="7">Python</a>
        
                <a data-sort="0045" 
                    href="/archive/?tag=DataScience"
                    title="DataScience"
                    rel="6">DataScience</a>
        
                <a data-sort="0045" 
                    href="/archive/?tag=MachineLearning"
                    title="MachineLearning"
                    rel="6">MachineLearning</a>
        
                <a data-sort="0046" 
                    href="/archive/?tag=BigData"
                    title="BigData"
                    rel="5">BigData</a>
        
                <a data-sort="0046" 
                    href="/archive/?tag=Spark"
                    title="Spark"
                    rel="5">Spark
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="https://cherishher.github.io/">Max Qi</a></li>
  <br>
  
  <li><a href="https://www.guchenghao.com/">Gu Chenghao</a></li>
  <br>
  
  <li><a href="https://syenpark.github.io/">Syen Park</a></li>
  <br>
  
  <li><a href="https://dojozheng.com/">DOJO Zheng</a></li>
  <br>
  
</ul>

            </div>
        </div>
    </div>

</article>

<!-- add support for mathjax by voleking-->




<!--Gitalk评论start  -->

<!-- Gitalk end -->


<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "leon_disqus";
    var disqus_identifier = "/2019/03/06/Python Interview Questions";
    var disqus_url = "http://localhost:4000/2019/03/06/Python-Interview-Questions/";

    (function () {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus 公共JS代码 end -->




<!-- async load function -->
<script>
    function async (u, c) {
        var d = document,
            t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function (e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async ("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js", function () {
        anchors.options = {
            visible: 'hover',
            placement: 'right',
            // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link {
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top: -0.1em;
        }
    }
</style>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ddc8a0647bb126e"></script>

    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  <li>
    <a target="_blank" href="https://www.zhihu.com/people/lyonling">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa  fa-stack-1x fa-inverse">知</i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="http://weibo.com/5395966937">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="https://github.com/lyonling">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.linkedin.com/in/liyang-ling-678220117">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Leon Ling's Blog 2018-2019
                    <br>
                    Powered by <a href="https://jekyllrb.com/">Jekyll</a> Theme <a href="https://github.com/Huxpro/huxpro.github.io">HuxPro</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->





<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-131740306-1';
    var _gaDomain = 'auto';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog (selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector),a,n,t,l,i,c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#"+$(this).prop('id');
            t = $(this).text();
            c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>');
            l = $('<li class="'+n+'_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function(e){
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->




<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
